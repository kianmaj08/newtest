/* =====================
   Oberstufe.site Styles
   Reines CSS, keine Frameworks
   ===================== */

/* Systemfont (Apple-Style) */
:root {
  --font-system: -apple-system, BlinkMacSystemFont, "Segoe UI", Roboto, Helvetica, Arial, "Apple Color Emoji", "Segoe UI Emoji";
  --bg: #0b1020;
  --bg-soft: #0b1020cc;
  --text: #f5f7fb;
  --text-dim: #e9edf6cc;
  --panel: rgba(255,255,255,0.15);
  --panel-border: rgba(255,255,255,0.3);
  --shadow: 0 20px 40px rgba(0,0,0,0.35);
  --accent: #7aa2ff;
  --outline: 2px solid #9ab4ff;
  --blur: saturate(140%) blur(20px);
  --glow-size: 220px;
}

html[data-theme="light"] {
  --bg: #eaf1ff;
  --bg-soft: #eaf1ffcc;
  --text: #0e1220;
  --text-dim: #0e1220cc;
  --panel: rgba(255,255,255,0.35);
  --panel-border: rgba(255,255,255,0.5);
  --shadow: 0 20px 40px rgba(0,0,0,0.2);
  --accent: #335cff;
  --outline: 2px solid #335cff;
  --blur: saturate(160%) blur(16px);
}

/* Reduce motion */
@media (prefers-reduced-motion: reduce) {
  * {
    animation-duration: 0.001ms !important;
    animation-iteration-count: 1 !important;
    transition-duration: 0.001ms !important;
    scroll-behavior: auto !important;
  }
}

* { box-sizing: border-box; }
html, body { height: 100%; }
body {
  margin: 0;
  font-family: var(--font-system);
  color: var(--text);
  background: var(--bg);
  line-height: 1.5;
}

.skip-link {
  position: absolute;
  left: -9999px;
  top: auto;
  background: #000;
  color: #fff;
  padding: .5rem .75rem;
  z-index: 10000;
}
.skip-link:focus { left: .5rem; top: .5rem; }

/* Loader */
#loader {
  position: fixed;
  inset: 0;
  display: grid;
  place-items: center;
  z-index: 999;
  backdrop-filter: blur(10px);
  background: color-mix(in hsl, var(--bg-soft), transparent 10%);
  transition: opacity .6s ease, visibility .6s ease;
}
#loader.hidden { opacity: 0; visibility: hidden; }
#loader .loader-backdrop {
  position: absolute; inset: 0;
  background: radial-gradient(1200px 800px at 50% 40%, rgba(255,255,255,0.08), transparent 60%);
  filter: blur(8px);
}
.pulse {
  width: 64px; height: 64px;
  border-radius: 50%;
  border: 4px solid rgba(255,255,255,0.35);
  border-top-color: transparent;
  animation: spin 1.1s linear infinite;
}
.loader-text { margin-top: 1rem; font-weight: 600; color: var(--text-dim); }

@keyframes spin { to { transform: rotate(360deg); } }

/* Header / Navbar */
.site-header { position: sticky; top: 0; z-index: 50; }
.nav {
  display: flex; align-items: center; justify-content: space-between;
  padding: .8rem 1rem;
  backdrop-filter: blur(8px);
  background: color-mix(in hsl, var(--bg-soft), transparent 25%);
  border-bottom: 1px solid rgba(255,255,255,0.12);
  transition: backdrop-filter .3s ease, background .3s ease;
}
.nav.scrolled { backdrop-filter: blur(16px); background: color-mix(in hsl, var(--bg-soft), transparent 10%); }
.brand {
  font-weight: 800; text-decoration: none; color: var(--text);
  letter-spacing: .3px;
}
.nav-actions { display: flex; gap: .5rem; }

.btn {
  appearance: none; border: 1px solid var(--panel-border);
  background: var(--panel);
  color: var(--text); padding: .5rem .9rem;
  border-radius: 12px; cursor: pointer;
  backdrop-filter: var(--blur);
  transition: transform .2s ease, box-shadow .2s ease, background .2s ease;
  box-shadow: var(--shadow);
}
.btn:hover { transform: translateY(-1px); }
.btn:active { transform: scale(.97); }
.btn:focus-visible { outline: var(--outline); outline-offset: 2px; }
.btn-ghost { background: transparent; box-shadow: none; }

/* Hero */
.hero {
  position: relative;
  min-height: 100svh;
  display: grid; place-items: center;
  background: center / cover no-repeat url('fuji-bg.jpg');
}
.hero .hero-overlay {
  position: absolute; inset: 0;
  background:
    linear-gradient(to top, rgba(0,0,0,.35), rgba(0,0,0,.1)),
    color-mix(in hsl, var(--bg), transparent 65%);
  filter: blur(2px);
}
.hero-content {
  position: relative; text-align: center; padding: 0 1rem; max-width: 1100px;
  opacity: 0; transform: translateY(10px);
  animation: content-in .9s ease .2s forwards;
}
@keyframes content-in {
  to { opacity: 1; transform: translateY(0); }
}

/* Title with gradient + shimmer */
.title {
  font-size: clamp(2.2rem, 4.5vw, 4.5rem);
  margin: 0;
  line-height: 1.05;
  background: linear-gradient(90deg, #ffffff, #e9f0ff, #ffffff);
  background-size: 200% 100%;
  -webkit-background-clip: text; background-clip: text; color: transparent;
  text-shadow: 0 1px 16px rgba(255,255,255,0.2);
}
.subtitle {
  font-size: clamp(.95rem, 1.1vw, 1.2rem);
  color: var(--text-dim);
  max-width: 60ch; margin: .9rem auto 0;
}

/* shimmer sweep */
.shimmer {
  position: relative;
  overflow: hidden;
}
.shimmer::after {
  content: "";
  position: absolute; inset: 0;
  background: linear-gradient(120deg, transparent 0%, rgba(255,255,255,.35) 20%, transparent 40%);
  transform: translateX(-120%);
  animation: shimmer 3.2s ease-in-out 1.2s infinite;
}
@keyframes shimmer { to { transform: translateX(120%); } }

/* Panels */
.panels {
  position: relative;
  margin: -12svh auto 8rem;
  padding: 0 1rem;
  max-width: 1200px;
  display: grid;
  grid-template-columns: repeat(12, 1fr);
  gap: 1rem;
}
.card.panel {
  grid-column: span 12;
  min-height: 180px;
}
@media (min-width: 720px) {
  .card.panel { grid-column: span 6; }
}
@media (min-width: 1024px) {
  .card.panel { grid-column: span 4; }
}
.card {
  background: var(--panel);
  border: 1px solid var(--panel-border);
  border-radius: 28px;
  padding: 1.2rem 1.2rem 1.4rem;
  box-shadow: var(--shadow);
  backdrop-filter: var(--blur);
  position: relative;
  transform-style: preserve-3d;
  transition: transform .35s cubic-bezier(.2,.7,.2,1), box-shadow .35s ease, background .25s ease;
  outline: none;
}
.card h2 { margin: .2rem 0 .4rem; }
.card p { margin: 0; color: var(--text-dim); }

/* Gloss effect */
.card::before {
  content: "";
  position: absolute; inset: 0;
  background: linear-gradient(110deg, transparent 0%, rgba(255,255,255,.18) 10%, transparent 20%);
  transform: translateX(-120%);
  transition: transform .8s ease;
  pointer-events: none;
  border-radius: inherit;
}
.card:hover::before { transform: translateX(120%); }

/* 3D tilt, active scale, focus outline */
.card:hover { box-shadow: 0 30px 60px rgba(0,0,0,.35); }
.card:active { transform: scale(.98); }
.card:focus-visible { outline: var(--outline); outline-offset: 4px; }

/* Footer */
.site-footer {
  padding: 2.5rem 1rem 3rem;
  text-align: center;
}
.footer-nav {
  display: flex; justify-content: center; gap: 1rem; flex-wrap: wrap;
  margin-bottom: .5rem;
}
.link {
  color: var(--text); text-decoration: none; border-bottom: 1px solid transparent;
  transition: border-color .2s ease;
}
.link:hover { border-bottom-color: currentColor; }
.small { color: var(--text-dim); }

/* Sakura */
.sakura {
  pointer-events: none;
  position: fixed; inset: 0;
  overflow: hidden; z-index: 5;
}
.sakura .petal {
  position: absolute;
  width: var(--size);
  height: var(--size);
  background: url('sakura-leaf.svg') center/contain no-repeat;
  opacity: .85;
  will-change: transform;
  animation: fall var(--dur) linear infinite, sway calc(var(--dur) * .6) ease-in-out infinite alternate;
  filter: drop-shadow(0 6px 8px rgba(0,0,0,.15));
}
html[data-theme="light"] .sakura .petal { filter: drop-shadow(0 6px 8px rgba(0,0,0,.2)); }

@keyframes fall {
  to { transform: translateY(110vh) rotate(360deg); }
}
@keyframes sway {
  to { transform: translateX(40px) rotate(-30deg); }
}
.sakura.off { display: none; }

/* Cursor glow */
#cursor-glow {
  position: fixed; width: var(--glow-size); height: var(--glow-size);
  margin-left: calc(var(--glow-size) / -2);
  margin-top: calc(var(--glow-size) / -2);
  border-radius: 50%;
  pointer-events: none;
  z-index: 4;
  background: radial-gradient(circle, rgba(255,255,255,.15), transparent 60%);
  mix-blend-mode: screen;
  transition: opacity .25s ease;
  opacity: .8;
}
html[data-theme="light"] #cursor-glow { mix-blend-mode: multiply; background: radial-gradient(circle, rgba(120,150,255,.22), transparent 60%); }

/* Accessibility focus for everything focusable */
:focus-visible { outline: var(--outline); outline-offset: 2px; }

/* Navbar blur stronger on scroll handled via .scrolled */

/* Fixed background for hero (parallax-like) */
.hero {
  background-attachment: fixed;
}
.hero .hero-content { 
  margin-top: -8vh; /* Titel etwas höher */
}

/* Remove previous shimmer leftovers (if any) */
.shimmer::after { display: none !important; }

/* Glassier design */
.card, .nav, .btn, .search-input {
  backdrop-filter: var(--blur);
}
.card {
  background: linear-gradient(180deg, rgba(255,255,255,0.18), rgba(255,255,255,0.10));
  border: 1px solid rgba(255,255,255,0.45);
  box-shadow: 0 30px 60px rgba(0,0,0,0.35), inset 0 1px 0 rgba(255,255,255,0.25);
}
html[data-theme="light"] .card {
  background: linear-gradient(180deg, rgba(255,255,255,0.55), rgba(255,255,255,0.35));
}

/* Search */
.search { display: flex; align-items: center; }
.search-input {
  width: min(46vw, 420px);
  padding: .55rem .9rem;
  border-radius: 16px;
  border: 1px solid var(--panel-border);
  background: color-mix(in hsl, var(--panel), transparent 10%);
  color: var(--text);
  outline: none;
  transition: box-shadow .2s ease, background .2s ease;
  box-shadow: inset 0 1px 0 rgba(255,255,255,.15), 0 10px 20px rgba(0,0,0,.2);
}
.search-input::placeholder { color: color-mix(in hsl, var(--text-dim), transparent 20%); }
.search-input:focus-visible { outline: var(--outline); }
.visually-hidden { position: absolute !important; clip: rect(1px,1px,1px,1px); padding:0; border:0; height:1px; width:1px; overflow:hidden; }

mark.search-hit {
  background: #ffed99;
  color: inherit;
  border-radius: 4px;
  padding: 0 2px;
}

/* New Sakura path: start top-right → drift to mid-left/bottom with wind sway */
@keyframes flowAcross {
  0%   { transform: translate(110vw, -20vh) rotate(0deg); }
  30%  { transform: translate(70vw, 10vh) rotate(90deg); }
  60%  { transform: translate(40vw, 30vh) rotate(180deg); }
  100% { transform: translate(10vw, 60vh) rotate(360deg); }
}
@keyframes windSway {
  0% { translate: 0 0; }
  50% { translate: -20px 6px; }
  100% { translate: 0 0; }
}
.sakura .petal {
  background: url('sakura-leaf.svg') center/contain no-repeat;
  animation: flowAcross var(--dur) linear forwards, windSway calc(var(--dur)*.9) ease-in-out infinite;
  opacity: .9;
}

/* Fast swoosh animation for page load */
@keyframes swooshAcross {
  0%   { transform: translate(120vw, -30vh) rotate(0deg); opacity: 0; }
  10%  { opacity: .95; }
  50%  { transform: translate(55vw, 15vh) rotate(180deg); }
  100% { transform: translate(0vw, 65vh) rotate(360deg); opacity: 0.8; }
}
